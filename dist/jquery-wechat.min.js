!function(e,n,i){"use strict";var o,t,r,u=i(n),c={},l={appid:"",img_url:"",img_width:"60",img_height:"60",link:function(){return e.location.toString()},desc:function(){var e=i('head meta[name="description"]');return e.length>0?e.attr("content"):""},title:function(){return n.title},callback:function(){}},a=function(){if("undefined"==typeof o)throw alert("You have to enable wechat first"),new Error("You have to enable wechat first")},f=function(e){return"function"==typeof e},d=function(e,n){return f(e[n])?e[n]():e[n]},s=function(e){a(),t.invoke("sendAppMessage",{appid:d(e,"appid"),img_url:d(e,"img_url"),img_width:d(e,"img_width"),img_height:d(e,"img_height"),link:d(e,"link"),desc:d(e,"desc"),title:d(e,"title")},function(n){e.callback(n.err_msg)})},g=function(e){a(),t.invoke("shareTimeline",{img_url:d(e,"img_url"),img_width:d(e,"img_width"),img_height:d(e,"img_height"),link:d(e,"link"),desc:d(e,"desc"),title:d(e,"title")},function(n){e.callback(n.err_msg)})},h=function(e){a(),t.invoke("shareWeibo",{content:d(e,"desc"),url:d(e,"link")},function(n){e.callback(n.err_msg)})},m=function(n){return function(){return"undefined"==typeof e.WeixinJSBridge?void n.reject():(t=e.WeixinJSBridge,t.on("menu:share:appmessage",function(){s(i.extend(!1,{},l,c))}),t.on("menu:share:timeline",function(){g(i.extend(!1,{},l,c))}),t.on("menu:share:weibo",function(){h(i.extend(!1,{},l,c))}),void n.resolve())}};i.wechat={enable:function(){if(o)return console.warn("wechat already enabled"),o;var n=i.Deferred();return o=n.promise(),"undefined"!=typeof e.WeixinJSBridge?(e.setTimeout(m(n),0),o):(r=e.setTimeout(m(n),3e3),u.on("WeixinJSBridgeReady",function(){e.clearTimeout(r),m(n)()}),o)},destroy:function(){u.off("WeixinJSBridgeReady"),t&&t.off&&(t.off("menu:share:appmessage"),t.off("menu:share:timeline"),t.off("menu:share:weibo")),o&&(o=void 0)},toggleMenu:function(e){a(),o.done(function(){t.call(e?"showOptionMenu":"hideOptionMenu")})},showMenu:function(){this.toggleMenu(!0)},hideMenu:function(){this.toggleMenu(!1)},toggleToolbar:function(e){a(),o.done(function(){t.call(e?"showToolbar":"hideToolbar")})},showToolbar:function(){this.toggleToolbar(!0)},hideToolbar:function(){this.toggleToolbar(!1)},getNetworkType:function(){var e=i.Deferred();return o.done(function(){t.call("getNetworkType",{},function(n){e.resolve(n.err_msg)})}),e.promise()},closeWindow:function(){var e=i.Deferred();return o.done(function(){t.call("closeWindow",{},function(n){return"close_window:ok"===n.err_msg?void e.resolve():"close_window:error"===n.err_msg?void e.reject():void 0})}),e.promise()},setShareOption:function(e){c=e}}}(window,document,jQuery);
//# sourceMappingURL=jquery-wechat.min.js.map